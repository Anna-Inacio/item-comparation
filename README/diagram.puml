@startuml
actor Client

rectangle "REST API" {
  Client --> ProductsController : GET /products\nGET /products/{id}\nGET /products/compare/{ids}
  rectangle ProductsController {
    ProductsController --> ProductsService : getAll/getById/compareFromCsv(...)
  }
}

rectangle "Service Layer" {
  ProductsService --> CsvIdParser : parseToLongList(csv)
  ProductsService --> Repository : Map<Long,Product> (in-memory)
  ProductsService --> Product : return domain objects
}

rectangle "Startup" {
  DataLoader ..> "resources/products.json" : reads
  DataLoader --> ProductsService : saveAll(products)
}

note left of ProductsService
- Throws ProductNotFoundException (404)
- Throws InternalServerErrorException (500)
end note

@enduml

